<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Résultat</title>
    <style>
      body { font-family: system-ui, sans-serif; margin: 2rem; }
      img { max-width: 420px; border-radius: 10px; display: block; margin-bottom: 1rem; }
      .pill { padding:.5rem 1rem; margin-right:.5rem; border-radius:999px; border:1px solid #aaa; background:#f5f5f5; opacity:.6; cursor:not-allowed; }
      .btn { padding:.6rem 1rem; border-radius:8px; border:1px solid #222; background:#fff; text-decoration:none; }
    </style>
  </head>
  <body>
    <h1>Résultat pour cette image :</h1>
    <img src="{{ image_data_url }}" alt="submitted image" />
    <!-- <img src="data:image/jpeg;base64,{{ base64_only }}" alt="Image" /> -->
    <h2>Classe prédite : {{ predicted_label }}</h2>
    <p>Confiance : {{ '%.3f'|format(confidence) }}</p>

    
    <h3>Feedback positif</h3>
    <form method="post" action="/feedback">
      <input type="hidden" name="predicted_label" value="{{ predicted_label }}">
      <input type="hidden" name="base64_data" value="{{ base64_only }}">
      <input type="hidden" name="expected_prediction" value="{{ predicted_label }}">
      <button type="submit" class="btn">
        Le modèle a bien prédit la classe {{ predicted_label }}
      </button>
    </form>

    <h3>Feedback négatif</h3>
    {% for c in classes %}
      <form method="post" action="/feedback">
        <input type="hidden" name="predicted_label" value="{{ predicted_label }}">
        <input type="hidden" name="base64_data" value="{{ base64_only }}">
        <input type="hidden" name="expected_prediction" value="{{ c }}">
        <button type="submit" class="btn">
          Le modèle aurait dû prédire la classe {{ c }}
        </button>
      </form>
    {% endfor %}


    <p><a href="/">↩︎ Revenir</a></p>
  </body>
</html>
